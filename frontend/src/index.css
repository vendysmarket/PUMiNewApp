@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* PUMi Design System - Cinematic Minimal */
    --background: 0 0% 0%;
    --foreground: 43 15% 91%;
    
    --card: 0 0% 0%;
    --card-foreground: 43 15% 91%;
    
    --popover: 0 0% 0%;
    --popover-foreground: 43 15% 91%;
    
    --primary: 43 15% 91%;
    --primary-foreground: 0 0% 0%;
    
    --secondary: 0 0% 8%;
    --secondary-foreground: 43 15% 91%;
    
    --muted: 0 0% 8%;
    --muted-foreground: 43 15% 55%;
    
    --accent: 0 0% 12%;
    --accent-foreground: 43 15% 91%;
    
    --destructive: 0 62% 30%;
    --destructive-foreground: 43 15% 91%;
    
    --border: 43 15% 91%;
    --input: 43 15% 91%;
    --ring: 43 15% 91%;
    
    --radius: 1rem;
    
    /* Custom PUMi tokens */
    --pumi-cream: 43 15% 91%;
    --pumi-black: 0 0% 0%;
    --pumi-fog: 0 0% 8%;
    --pumi-muted: 43 15% 91%;
    
    /* Focus Mode neon glow */
    --neon-glow: 0 0% 100%;
    --neon-glow-color: hsla(0, 0%, 100%, 0.4);
    --neon-glow-strong: hsla(0, 0%, 100%, 0.6);
  }

  .dark {
    --background: 0 0% 0%;
    --foreground: 43 15% 91%;
    --card: 0 0% 0%;
    --card-foreground: 43 15% 91%;
    --popover: 0 0% 0%;
    --popover-foreground: 43 15% 91%;
    --primary: 43 15% 91%;
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 8%;
    --secondary-foreground: 43 15% 91%;
    --muted: 0 0% 8%;
    --muted-foreground: 43 15% 55%;
    --accent: 0 0% 12%;
    --accent-foreground: 43 15% 91%;
    --destructive: 0 62% 30%;
    --destructive-foreground: 43 15% 91%;
    --border: 43 15% 91%;
    --input: 43 15% 91%;
    --ring: 43 15% 91%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  }
}

/* Grid overlay */
.grid-overlay {
  background-image: 
    linear-gradient(rgba(235, 233, 227, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(235, 233, 227, 0.03) 1px, transparent 1px);
  background-size: 60px 60px;
}

/* Fog overlay */
.fog-overlay {
  background: rgba(20, 20, 20, 0.35);
  pointer-events: none;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* Focus Mode neon glow effects */
.neon-glow-input {
  box-shadow: 
    0 0 8px var(--neon-glow-color),
    0 0 16px var(--neon-glow-color),
    inset 0 0 4px var(--neon-glow-color);
  border-color: hsl(var(--neon-glow)) !important;
}

.neon-glow-button {
  box-shadow: 
    0 0 6px var(--neon-glow-color),
    0 0 12px var(--neon-glow-color);
  border-color: hsl(var(--neon-glow));
  color: hsl(var(--neon-glow));
}

.neon-glow-bubble {
  box-shadow: 
    0 0 6px var(--neon-glow-color),
    0 0 10px var(--neon-glow-color);
  border: 1px solid hsla(0, 0%, 100%, 0.3);
}

.neon-glow-card {
  box-shadow: 
    0 0 12px var(--neon-glow-color),
    0 0 24px var(--neon-glow-color);
  border: 1px solid hsla(0, 0%, 100%, 0.25);
}

.neon-badge {
  background: hsla(0, 0%, 100%, 0.1);
  border: 1px solid hsla(0, 0%, 100%, 0.3);
  box-shadow: 0 0 8px var(--neon-glow-color);
}

/* Soft pulse animation for Progress capsule */
@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 hsla(0, 0%, 100%, 0.2);
  }
  50% {
    opacity: 0.85;
    box-shadow: 0 0 12px 2px hsla(0, 0%, 100%, 0.25);
  }
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}

/* Focus page center icon glow */
.focus-icon-glow {
  filter: drop-shadow(0 0 20px hsla(0, 0%, 100%, 0.4)) drop-shadow(0 0 40px hsla(0, 0%, 100%, 0.2));
}

/* Start button glow effect */
.start-button-glow {
  box-shadow: 
    0 0 20px hsla(0, 0%, 100%, 0.15),
    0 0 40px hsla(0, 0%, 100%, 0.1),
    inset 0 0 20px hsla(0, 0%, 100%, 0.05);
  border-color: hsla(0, 0%, 100%, 0.4);
}

.start-button-glow:hover {
  box-shadow: 
    0 0 30px hsla(0, 0%, 100%, 0.25),
    0 0 60px hsla(0, 0%, 100%, 0.15),
    inset 0 0 30px hsla(0, 0%, 100%, 0.08);
  border-color: hsla(0, 0%, 100%, 0.6);
}

/* Goal progress bar glow */
.progress-bar-glow {
  box-shadow: 0 0 10px hsla(0, 0%, 100%, 0.2);
}

.progress-bar-fill-glow {
  box-shadow: 
    0 0 8px hsla(0, 0%, 100%, 0.4),
    0 0 16px hsla(0, 0%, 100%, 0.2);
}

/* Empty chat state glow effects */
@keyframes welcome-glow-pulse {
  0%, 100% {
    opacity: 1;
    text-shadow: 
      0 0 20px hsla(43, 15%, 91%, 0.08),
      0 0 40px hsla(43, 15%, 91%, 0.04);
  }
  50% {
    opacity: 0.92;
    text-shadow: 
      0 0 30px hsla(43, 15%, 91%, 0.15),
      0 0 60px hsla(43, 15%, 91%, 0.08),
      0 0 80px hsla(43, 15%, 91%, 0.04);
  }
}

@keyframes input-glow-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 hsla(43, 15%, 91%, 0.08);
    border-color: hsla(43, 15%, 91%, 0.3);
  }
  50% {
    box-shadow: 
      0 0 15px 3px hsla(43, 15%, 91%, 0.1),
      0 0 30px 6px hsla(43, 15%, 91%, 0.05);
    border-color: hsla(43, 15%, 91%, 0.45);
  }
}

/* Centered welcome block in empty state */
.welcome-glow-block {
  animation: welcome-glow-pulse 5s ease-in-out infinite;
}

/* Empty state input glow */
.empty-chat-input {
  animation: input-glow-pulse 4s ease-in-out infinite;
}

/* Static glow fallback for reduced motion */
.welcome-glow-block-static {
  text-shadow: 0 0 20px hsla(43, 15%, 91%, 0.12);
}

.empty-chat-input-static {
  box-shadow: 0 0 10px 2px hsla(43, 15%, 91%, 0.08);
  border-color: hsla(43, 15%, 91%, 0.4) !important;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .welcome-glow-block {
    animation: none;
    text-shadow: 0 0 20px hsla(43, 15%, 91%, 0.12);
  }
  
  .empty-chat-input {
    animation: none;
    box-shadow: 0 0 10px 2px hsla(43, 15%, 91%, 0.08);
    border-color: hsla(43, 15%, 91%, 0.4) !important;
  }
}

/* Drawer polish - shadow and transitions */
.drawer-shadow-left {
  box-shadow: -8px 0 24px -4px hsla(0, 0%, 0%, 0.3);
}

.drawer-shadow-right {
  box-shadow: 8px 0 24px -4px hsla(0, 0%, 0%, 0.3);
}

/* Overlay fade animation */
@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes overlay-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

.overlay-fade-enter {
  animation: overlay-fade-in 0.2s ease-out forwards;
}

/* Modal scale animation */
@keyframes modal-scale-in {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.modal-scale-enter {
  animation: modal-scale-in 0.2s ease-out forwards;
}

/* Reduced motion: disable all polish animations */
@media (prefers-reduced-motion: reduce) {
  .drawer-shadow-left,
  .drawer-shadow-right {
    box-shadow: none;
  }
  
  .overlay-fade-enter {
    animation: none;
    opacity: 1;
  }
  
  .modal-scale-enter {
    animation: none;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

/* Confetti animation for checkout success */
@keyframes confetti-fall {
  0% {
    opacity: 0;
    transform: translateY(0) rotate(0deg);
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateY(100vh) rotate(720deg);
  }
}

.animate-confetti-fall {
  animation: confetti-fall 4s ease-in-out forwards;
}

/* Sidebar active item subtle glow */
.sidebar-item-active-glow {
  box-shadow: 0 0 8px hsla(43, 15%, 91%, 0.08);
}

@media (prefers-reduced-motion: reduce) {
  .sidebar-item-active-glow {
    box-shadow: none;
  }
}

/* Modal and dropdown fade-in animation */
@keyframes modal-fade-in {
  from {
    opacity: 0;
    transform: scale(0.98);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes dropdown-fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Apply to Radix dialog/dropdown content */
[data-state="open"][data-radix-dialog-content],
[data-state="open"][data-radix-alert-dialog-content] {
  animation: modal-fade-in 200ms ease-out;
}

[data-state="open"][data-radix-dropdown-menu-content],
[data-state="open"][data-radix-popover-content],
[data-state="open"][data-radix-select-content] {
  animation: dropdown-fade-in 150ms ease-out;
}

@media (prefers-reduced-motion: reduce) {
  [data-state="open"][data-radix-dialog-content],
  [data-state="open"][data-radix-alert-dialog-content],
  [data-state="open"][data-radix-dropdown-menu-content],
  [data-state="open"][data-radix-popover-content],
  [data-state="open"][data-radix-select-content] {
    animation: none;
  }
}

/* Mobile bottom nav is now always visible via MobileBottomNav component */
